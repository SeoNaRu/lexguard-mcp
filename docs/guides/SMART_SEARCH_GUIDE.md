# Smart Search Tool 가이드

## 🎯 개요

`smart_search_tool`은 사용자 질문을 분석하여 **자동으로 적절한 법적 정보 소스를 선택**하고 검색하는 통합 툴입니다.

## 🔄 작동 원리

### 1. 질문 의도 분석
사용자 질문에서 키워드와 패턴을 분석하여 검색 타입을 자동 결정:

- **법령**: "법", "법령", "조문", "법 제250조"
- **판례**: "판례", "대법원", "판결", "선고"
- **법령해석**: "법령해석", "해석", "의견", "법제처"
- **행정심판**: "행정심판", "심판", "재결"
- **헌재결정**: "헌법재판소", "헌재", "위헌"
- **위원회**: "위원회", "결정문", "개인정보보호위원회"
- **특별행정심판**: "조세심판원", "해양안전심판원"
- **자치법규**: "조례", "규칙", "지방자치"
- **행정규칙**: "행정규칙", "훈령", "예규"

### 2. 파라미터 자동 추출
질문에서 자동으로 추출:

- **법령명**: "형법", "민법", "개인정보보호법"
- **조문 번호**: "제250조", "250조"
- **날짜**: "2023년", "2023.01.01"
- **기관명**: "개인정보보호위원회", "조세심판원"

### 3. 통합 검색 실행
여러 검색 타입을 병렬로 실행하여 종합 결과 반환

## 📝 사용 예시

### 예시 1: 법령 조문 질문
```
사용자: "형법 제250조가 뭐야?"
→ 자동 분석: law 타입, law_name="형법", article_number="250"
→ get_law_tool 호출 (mode=single)
```

### 예시 2: 판례 검색
```
사용자: "손해배상 판례 찾아줘"
→ 자동 분석: precedent 타입, query="손해배상"
→ search_precedent_tool 호출
```

### 예시 3: 법령해석 확인
```
사용자: "개인정보보호법 해석 확인"
→ 자동 분석: interpretation 타입, query="개인정보보호법"
→ search_law_interpretation_tool 호출
```

### 예시 4: 복합 질문
```
사용자: "형법과 관련된 판례와 해석 모두 찾아줘"
→ 자동 분석: law + precedent + interpretation 타입
→ 병렬 검색 실행
```

## 🛠️ LLM 사용 가이드

### LLM이 해야 할 일

1. **사용자 질문을 그대로 전달**
   ```json
   {
     "name": "smart_search_tool",
     "arguments": {
       "query": "형법 제250조가 뭐야?"
     }
   }
   ```

2. **결과 해석 및 사용자에게 답변**
   - 검색 결과를 바탕으로 자연어로 답변
   - 여러 타입의 결과가 있으면 모두 활용

### LLM이 하지 말아야 할 일

❌ **파라미터를 직접 채우려고 시도하지 말 것**
- `law_name`, `article_number` 등을 직접 추출할 필요 없음
- `smart_search_tool`이 자동으로 처리

❌ **여러 툴을 개별적으로 호출하지 말 것**
- `search_law_tool`, `search_precedent_tool` 등을 따로 호출할 필요 없음
- `smart_search_tool` 하나로 통합 검색 가능

## 🎨 장점

### 1. **단순성**
- LLM은 사용자 질문만 전달하면 됨
- 복잡한 파라미터 추출 불필요

### 2. **지능성**
- 질문 의도를 자동 분석
- 적절한 검색 타입 자동 선택

### 3. **통합성**
- 여러 검색 타입을 한 번에 실행
- 종합적인 법적 정보 제공

### 4. **확장성**
- 새로운 검색 타입 추가 용이
- API 변경에 유연하게 대응

## 📊 응답 형식

```json
{
  "query": "형법 제250조가 뭐야?",
  "detected_intents": ["law"],
  "results": {
    "law": {
      "law_name": "형법",
      "article_number": "250",
      "article": {
        "조문": "제250조 (살인)",
        "내용": "..."
      }
    }
  },
  "total_types": 1
}
```

## 🔧 고급 사용법

### 특정 타입만 검색
```json
{
  "name": "smart_search_tool",
  "arguments": {
    "query": "형법 관련 정보",
    "search_types": ["law", "precedent"]
  }
}
```

### 결과 수 제한
```json
{
  "name": "smart_search_tool",
  "arguments": {
    "query": "손해배상 판례",
    "max_results_per_type": 10
  }
}
```

## 🚀 다음 단계

1. **서버 재시작**
2. **LLM 테스트**: 다양한 질문으로 테스트
3. **성능 모니터링**: 의도 분석 정확도 확인
4. **개선**: 키워드 및 패턴 추가

